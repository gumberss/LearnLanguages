version: '3.5'

networks:
    default-network:
        name: default-network

services:
  #API
    proposal-webapi:
        build:
            context: .
            dockerfile: Proposal.WebApi/Proposal.WebApi.Dockerfile
        restart: always
        ports: 
            - "9000:80"
        environment:
        #DB
            - DatabaseProtocol=http
            - DatabaseHost=field-database
            - DatabasePort=8080
            - DatabaseName=Test
        #MsgBroker
            - MsgBrokerHostName=Test
            - MsgBrokerUserName=guest
            - MsgBrokerPassword=guest
            - MsgBrokerPort=5600
      
        networks:
            - default-network
            
    proposal-database:
        image: mcr.microsoft.com/mssql/server:2019-latest
        environment:
            SA_PASSWORD: "Pr0p0s@l!"
            ACCEPT_EULA: "Y"
        networks:
            - default-network
    